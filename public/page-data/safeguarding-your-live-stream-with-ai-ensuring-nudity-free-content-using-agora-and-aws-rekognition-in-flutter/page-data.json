{"componentChunkName":"component---src-templates-blog-post-js","path":"/safeguarding-your-live-stream-with-ai-ensuring-nudity-free-content-using-agora-and-aws-rekognition-in-flutter/","result":{"data":{"wpPost":{"id":"cG9zdDoxMzQ0Mw==","title":"Safeguarding Your Live Stream with AI: Ensuring Nudity-Free Content Using Agora and AWS Rekognition in Flutter","excerpt":"","content":"<div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-20 fusion-flex-container has-pattern-background has-mask-background nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-19 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:70px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\" data-scroll-devices=\"small-visibility,medium-visibility,large-visibility\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-text fusion-text-70\" style=\"--awb-font-size:38px;\"><p><strong>Safeguarding Your Live Stream with AI: Ensuring Nudity-Free Content Using Agora and AWS Rekognition in Flutter</strong></p>\n</div><nav class=\"fusion-breadcrumbs awb-yoast-breadcrumbs fusion-breadcrumbs-4\" style=\"--awb-margin-top:-20px;--awb-font-size:16px;--awb-text-color:#000000;--awb-breadcrumb-sep:&#039;/&#039;;\" aria-label=\"Breadcrumb\"><span><span><a href=\"/\">Home</a></span> » <span><a href=\"/blog/\">Blog</a></span> » <span class=\"breadcrumb_last\" aria-current=\"page\">Salesforce Team up With Hackers: The Bug Bounty Program</span></span></nav></div></div></div></div><div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-21 fusion-flex-container has-pattern-background has-mask-background nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-padding-right:20px;--awb-padding-left:20px;--awb-margin-top:-20px;--awb-background-color:var(--awb-color1);--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-20 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:20px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\" data-scroll-devices=\"small-visibility,medium-visibility,large-visibility\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-title title fusion-title-33 fusion-no-small-visibility fusion-no-medium-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:35px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:35;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Introduction</span></h2></div><div class=\"fusion-title title fusion-title-34 fusion-no-large-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:24px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:24;--minFontSize:24;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Introduction</span></h2></div><div class=\"fusion-text fusion-text-71\"><p><span style=\"font-weight: 400;\">Live streaming has soared in popularity, enabling content creators to engage with their audience in real-time. Yet, as live-streaming platforms proliferate, the imperative to maintain appropriate, nudity-free content looms large. In this blog post, we'll delve into the potent fusion of Agora, AWS Rekognition, Flutter, and Firebase, unveiling how AI-driven solutions can be your ally in safeguarding live streams from inappropriate content. Join us on this journey to explore innovative solutions that ensure a seamless viewing experience for your audience.</span></p>\n</div></div></div></div></div><div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-22 fusion-flex-container nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-padding-right:20px;--awb-padding-left:20px;--awb-background-color:var(--awb-color1);--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-21 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:-20px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-title title fusion-title-35 fusion-no-small-visibility fusion-no-medium-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:35px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:35;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Step 1: Capturing Screenshots and Uploading to AWS S3</span></h2></div><div class=\"fusion-title title fusion-title-36 fusion-no-large-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:24px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:24;--minFontSize:24;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Step 1: Capturing Screenshots and Uploading to AWS S3</span></h2></div><div class=\"fusion-text fusion-text-72\"><p><span style=\"font-weight: 400;\">To begin safeguarding your live stream against nudity, we'll follow these initial steps:</span></p>\n</div><div class=\"fusion-text fusion-text-73\"><h3><strong>Understanding the Technology</strong></h3>\n<p><span style=\"font-weight: 400;\">Let's start by understanding the core technologies at play:</span></p>\n<p><span style=\"font-weight: 400;\">Amazon Rekognition: As an integral part of Amazon's AI services, Amazon Rekognition leverages deep learning for image analysis, lifelike text-to-speech conversion, and the creation of intuitive conversational interfaces. It forms the backbone of our content moderation solution.</span></p>\n<p><span style=\"font-weight: 400;\">Implementing a cloud recording process for your live stream involves several key steps:</span></p>\n</div><div class=\"fusion-image-element \" style=\"--awb-margin-top:10px;--awb-margin-bottom:10px;--awb-caption-title-font-family:var(--h2_typography-font-family);--awb-caption-title-font-weight:var(--h2_typography-font-weight);--awb-caption-title-font-style:var(--h2_typography-font-style);--awb-caption-title-size:var(--h2_typography-font-size);--awb-caption-title-transform:var(--h2_typography-text-transform);--awb-caption-title-line-height:var(--h2_typography-line-height);--awb-caption-title-letter-spacing:var(--h2_typography-letter-spacing);\"><span class=\" fusion-imageframe imageframe-none imageframe-13 hover-type-none\"><img decoding=\"async\" width=\"1401\" height=\"522\" alt=\"Agora Cloud recording services\" title=\"Agora Cloud\" src=\"https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora.jpg\" data-orig-src=\"https://www.deligence.com/wp-content/uploads/2023/09/Agora.jpg\" class=\"lazyload img-responsive wp-image-13446\" srcset=\"data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20width%3D%271401%27%20height%3D%27522%27%20viewBox%3D%270%200%201401%20522%27%3E%3Crect%20width%3D%271401%27%20height%3D%27522%27%20fill-opacity%3D%220%22%2F%3E%3C%2Fsvg%3E\" data-srcset=\"https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora-200x75.jpg 200w, https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora-400x149.jpg 400w, https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora-600x224.jpg 600w, https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora-800x298.jpg 800w, https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora-1200x447.jpg 1200w, https://determinate-arrant-florencio.ngrok-free.dev/backup151025/wp-content/uploads/2023/09/Agora.jpg 1401w\" data-sizes=\"auto\" data-orig-sizes=\"(max-width: 1024px) 100vw, (max-width: 640px) 100vw, 1401px\" /></span></div><div class=\"fusion-text fusion-text-74\"><ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Get a Resource ID: Before initiating a cloud recording, you must acquire a cloud recording resource by calling the </span><b>acquire</b><span style=\"font-weight: 400;\"> method. This resource ID is essential for marking the recording process.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Start a Cloud Recording: Use the </span><b>start</b><span style=\"font-weight: 400;\"> method to join the channel and start a cloud recording. You'll receive a recording ID to monitor the current recording process.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Query the Recording Status: Periodically check the recording status using the </span><b>query</b><span style=\"font-weight: 400;\"> method while the recording is in progress.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Stop the Cloud Recording: When your live stream ends, call the </span><b>stop</b><span style=\"font-weight: 400;\"> method to terminate the cloud recording.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Upload the Recording File: Once the recording is complete, the cloud recording service automatically uploads the recording file to your specified <b>third-party cloud storage</b>, in this case, AWS S3.</li>\n</ol>\n</div></div></div></div></div><div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-23 fusion-flex-container nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-padding-right:20px;--awb-padding-left:20px;--awb-background-color:var(--awb-color1);--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-22 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:-20px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-text fusion-text-75\"><h3><strong>Prerequisites</strong></h3>\n<p><span style=\"font-weight: 400;\">Before proceeding, make sure you have the following in place:</span></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">A valid Agora account.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">An Agora project with an App ID and a temporary token.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Access to the internet and any necessary firewall configurations.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Third-party cloud storage service enabled (e.g., Amazon S3).</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">An active Video SDK channel with users actively streaming.</span></li>\n</ul>\n<p><span style=\"font-weight: 400;\">For this implementation, we'll use the Cloud Recording RESTful API to capture screenshots of a video stream in a channel and upload them to AWS S3 storage. </span><span style=\"font-weight: 400;\">You can choose to capture screenshots only, or you can capture screenshots and recordings during the recording process, with Agora charging recording fees for the latter option. We will opt for the \"Take screenshots only\" approach.</span></p>\n<p><span style=\"font-weight: 400;\">You can organize your screenshots in a structure like this:</span></p>\n</div><style type=\"text/css\" scopped=\"scopped\">.fusion-syntax-highlighter-1 > .CodeMirror, .fusion-syntax-highlighter-1 > .CodeMirror .CodeMirror-gutters {background-color:var(--awb-color1);}.fusion-syntax-highlighter-1 > .CodeMirror .CodeMirror-gutters { background-color: var(--awb-color2); }.fusion-syntax-highlighter-1 > .CodeMirror .CodeMirror-linenumber { color: var(--awb-color8); }</style><div class=\"fusion-syntax-highlighter-container fusion-syntax-highlighter-1 fusion-syntax-highlighter-theme-light\" style=\"opacity:0;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:14px;border-width:1px;border-style:solid;border-color:var(--awb-color3);\"><div class=\"syntax-highlighter-copy-code\"><span class=\"syntax-highlighter-copy-code-title\" data-id=\"fusion_syntax_highlighter_1\" style=\"font-size:14px;\">Copy to Clipboard</span></div><label for=\"fusion_syntax_highlighter_1\" class=\"screen-reader-text\">Syntax Highlighter</label><textarea class=\"fusion-syntax-highlighter-textarea\" id=\"fusion_syntax_highlighter_1\" data-readOnly=\"nocursor\" data-lineNumbers=\"1\" data-lineWrapping=\"\" data-theme=\"default\" data-mode=\"text/javascript\">Amazon S3/Buckets/<Your_bucket_name>/users/<User_id>screenshot_ids</textarea></div><div class=\"fusion-text fusion-text-76\" style=\"--awb-margin-top:10px;\"><p><span style=\"font-weight: 400;\">Refer to Agora's official documentation for capturing and uploading screenshots to AWS S3:</span><a href=\"https://docs.agora.io/en/cloud-recording/develop/screen-capture#overview\"><span style=\"font-weight: 400;\"> Agora Cloud Recording – Screen Capture</span></a></p>\n</div></div></div></div></div><div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-24 fusion-flex-container nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-padding-right:20px;--awb-padding-left:20px;--awb-background-color:var(--awb-color1);--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-23 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:-20px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-title title fusion-title-37 fusion-no-small-visibility fusion-no-medium-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:35px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:35;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Step 2: Automating Image Moderation with AWS Lambda and Firebase</span></h2></div><div class=\"fusion-title title fusion-title-38 fusion-no-large-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:24px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:24;--minFontSize:24;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Step 2: Automating Image Moderation with AWS Lambda and Firebase</span></h2></div><div class=\"fusion-text fusion-text-77\"><p><span style=\"font-weight: 400;\">Now that we can capture and upload screenshots of our live stream, the next step is to automatically check these images for potential nudity using AWS Rekognition and update our streaming database through Firebase. Here's how:</span></p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Create an AWS Lambda Function: This Lambda function will interact with the same S3 bucket where your live stream screenshots are stored. It will analyze the content for potential nudity confidence and update your Firebase database accordingly.</span></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><span style=\"font-weight: 400;\">Code for Lambda Function:</span></li>\n</ol>\n<p><span style=\"font-weight: 400;\">javascript</span></p>\n<p><span style=\"font-weight: 400;\">// AWS Lambda function code</span></p>\n</div><style type=\"text/css\" scopped=\"scopped\">.fusion-syntax-highlighter-2 > .CodeMirror, .fusion-syntax-highlighter-2 > .CodeMirror .CodeMirror-gutters {background-color:var(--awb-color1);}.fusion-syntax-highlighter-2 > .CodeMirror .CodeMirror-gutters { background-color: var(--awb-color2); }.fusion-syntax-highlighter-2 > .CodeMirror .CodeMirror-linenumber { color: var(--awb-color8); }</style><div class=\"fusion-syntax-highlighter-container fusion-syntax-highlighter-2 fusion-syntax-highlighter-theme-light\" style=\"opacity:0;margin-top:0px;margin-right:0px;margin-bottom:0px;margin-left:0px;font-size:14px;border-width:1px;border-style:solid;border-color:var(--awb-color3);\"><div class=\"syntax-highlighter-copy-code\"><span class=\"syntax-highlighter-copy-code-title\" data-id=\"fusion_syntax_highlighter_2\" style=\"font-size:14px;\">Copy to Clipboard</span></div><label for=\"fusion_syntax_highlighter_2\" class=\"screen-reader-text\">Syntax Highlighter</label><textarea class=\"fusion-syntax-highlighter-textarea\" id=\"fusion_syntax_highlighter_2\" data-readOnly=\"nocursor\" data-lineNumbers=\"1\" data-lineWrapping=\"\" data-theme=\"default\" data-mode=\"text/javascript\">const aws = require('aws-sdk');\nvar rekognition = new aws.Rekognition();\nconst { initializeApp, applicationDefault, cert } = require('firebase-admin/app');\nconst { getFirestore, Timestamp, FieldValue } = require('firebase-admin/firestore');\n\n\naws.config.update({ region: 'us-west-1' });\nconst serviceAccount = require('./serviceAccountKey.json');\ninitializeApp({\n    credential: cert(serviceAccount)\n});\nconst db = getFirestore();\n\nexports.handler = async (event, context) => {\n    console.log('Received event:', JSON.stringify(event, null, 2));\n\n    // Get the object from the event and show its content type\n    const bucket = event.Records[0].s3.bucket.name;\n    const key = decodeURIComponent(event.Records[0].s3.object.key.replace(/\\+/g, ' '));\n\n    let userDocId = key.substring(key.search(\"__uid_s_\") + \"__uid_s_\".length, key.search(\"__uid_e_video_\"));//extract the channel id from user image\n\n    var params = {\n        Image: { /* required */\n\n            S3Object: {\n                Bucket: bucket,\n                Name: key,\n\n            }\n        },\n\n        MinConfidence: 50\n    };\n    try {\n        const response = await rekognition.detectModerationLabels(params, function (err, response) {\n            if (err) {\n                console.log(err, err.stack); // handle error if an error occurred\n            } else {\n                return response;\n            }\n\n        }).promise();\n        if (response !== null) {\n            const isNudity = response.ModerationLabels.some((x) => x.Confidence > 70)//check nudity//x.Name  === 'Explicit Nudity' &&\n\n            if (isNudity) {\n\n                const docRef = db.collection('streaming').doc(userDocId);\n                await docRef.set({\n                    'isNudity': true,\n                }, { merge: true });\n            }\n\n        }\n\n    } catch (e) {\n        console.log('error', e);\n    }\n\n}\n</textarea></div><div class=\"fusion-text fusion-text-78\" style=\"--awb-margin-top:10px;\"><p><span style=\"font-weight: 400;\">This code snippet utilizes the `</span><a href=\"https://docs.aws.amazon.com/rekognition/latest/APIReference/API_DetectModerationLabels.html\"><span style=\"font-weight: 400;\">detectModerationLabels</span></a><span style=\"font-weight: 400;\">` API to identify content with a confidence level exceeding 70%, signifying potential nudity or explicit content. If such content is detected, the Lambda function updates the Firebase database to actively monitor and potentially stop the live streaming from the front-end side.</span></p>\n<p><span style=\"font-weight: 400;\">For detailed instructions on configuring a trigger for an S3 bucket and deploying a Lambda function, refer to the official AWS documentation:</span><a href=\"https://docs.aws.amazon.com/lambda/latest/dg/with-s3-example.html\"><span style=\"font-weight: 400;\"> AWS Lambda with Amazon S3 – Example</span></a></p>\n</div></div></div></div></div><div class=\"fusion-fullwidth fullwidth-box fusion-builder-row-25 fusion-flex-container nonhundred-percent-fullwidth non-hundred-percent-height-scrolling\" style=\"--awb-border-radius-top-left:0px;--awb-border-radius-top-right:0px;--awb-border-radius-bottom-right:0px;--awb-border-radius-bottom-left:0px;--awb-padding-right:20px;--awb-padding-left:20px;--awb-background-color:var(--awb-color1);--awb-flex-wrap:wrap;\" ><div class=\"fusion-builder-row fusion-row fusion-flex-align-items-flex-start fusion-flex-content-wrap\" style=\"max-width:1310.4px;margin-left: calc(-4% / 2 );margin-right: calc(-4% / 2 );\"><div class=\"fusion-layout-column fusion_builder_column fusion-builder-column-24 fusion_builder_column_1_1 1_1 fusion-flex-column\" style=\"--awb-bg-size:cover;--awb-width-large:100%;--awb-margin-top-large:-20px;--awb-spacing-right-large:1.92%;--awb-margin-bottom-large:20px;--awb-spacing-left-large:1.92%;--awb-width-medium:100%;--awb-order-medium:0;--awb-spacing-right-medium:1.92%;--awb-spacing-left-medium:1.92%;--awb-width-small:100%;--awb-order-small:0;--awb-spacing-right-small:1.92%;--awb-spacing-left-small:1.92%;\"><div class=\"fusion-column-wrapper fusion-column-has-shadow fusion-flex-justify-content-flex-start fusion-content-layout-column\"><div class=\"fusion-title title fusion-title-39 fusion-no-small-visibility fusion-no-medium-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:35px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:35;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Conclusion</span></h2></div><div class=\"fusion-title title fusion-title-40 fusion-no-large-visibility fusion-sep-none fusion-title-text fusion-title-size-two\" style=\"--awb-text-color:#202020;--awb-font-size:24px;\"><h2 class=\"fusion-title-heading title-heading-left fusion-responsive-typography-calculated\" style=\"font-family:&quot;Plus Jakarta Sans&quot;;font-style:normal;font-weight:300;margin:0;font-size:1em;letter-spacing:-0.015em;text-transform:var(--awb-typography1-text-transform);--fontSize:24;--minFontSize:24;line-height:1.5;text-shadow:0px;\"><span style=\"font-weight: 400;\">Conclusion</span></h2></div><div class=\"fusion-text fusion-text-79\"><p><span style=\"font-weight: 400;\">Shielding your live stream from inappropriate content isn't just important; it's essential for creating a safe and enjoyable viewing experience for your audience. The integration of Agora, AWS Rekognition, and Firebase empowers you with a formidable AI-driven solution to detect and promptly address nudity in real time. This comprehensive approach ensures that your live streams not only remain enjoyable but also free from explicit content, safeguarding the integrity of your content and the trust of your audience. Embrace these steps to fortify your live streams, knowing that your audience deserves nothing less than a secure and seamless viewing experience, thanks to the transformative power of AI.</span></p>\n</div></div></div></div></div>\n","date":"2023-09-13T15:00:11","author":{"node":{"name":"Sanjay Kumar","avatar":{"url":"https://secure.gravatar.com/avatar/12cd5109e81ca7f47c3bdfd017c1351234efe746c16d7811a74e031e6887c0e7?s=96&d=mm&r=g"}}},"featuredImage":{"node":{"altText":"AI Technology Info","gatsbyImageData":null}}}},"pageContext":{"id":"cG9zdDoxMzQ0Mw=="}},"staticQueryHashes":[],"slicesMap":{"footer":"footer","header":"header"}}